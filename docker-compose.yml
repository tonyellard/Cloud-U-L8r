services:
  essthree:
    build: 
      context: ./services/essthree
    container_name: essthree
    ports:
      - "9300:9300"
    volumes:
      - ./services/essthree/data:/data
    environment:
      - DATA_DIR=/data
      - TZ=UTC
    restart: unless-stopped
    networks:
      - shared-network

  cloudfauxnt:
    build: 
      context: ./services/cloudfauxnt
    container_name: cloudfauxnt
    ports:
      - "9310:9310"
    volumes:
      - ./config:/app/config:ro
      - ./services/cloudfauxnt/keys:/app/keys:ro
    environment:
      - TZ=UTC
    restart: unless-stopped
    command: ["./cloudfauxnt", "--config", "/app/config/cloudfauxnt.config.yaml"]
    depends_on:
      - essthree
    networks:
      - shared-network

  ess-queue-ess:
    build: 
      context: ./services/ess-queue-ess
    container_name: ess-queue-ess
    ports:
      - "9320:9320"
    environment:
      - PORT=9320
    volumes:
      - ./services/ess-queue-ess/data:/app/data
      - ./config:/app/config:ro
    command: ["./ess-queue-ess", "--config", "/app/config/ess-queue-ess.config.yaml"]
    networks:
      - shared-network

  ess-enn-ess:
    build: 
      context: ./services/ess-enn-ess
    container_name: ess-enn-ess
    ports:
      - "9330:9330"
    volumes:
      - ./config:/app/config:ro
      - ./services/ess-enn-ess/data:/app/data
    command: ["-config", "/app/config/ess-enn-ess.config.yaml"]
    networks:
      - shared-network
    depends_on:
      - ess-queue-ess

  admin-console:
    build:
      context: ./services/admin-console
    container_name: admin-console
    ports:
      - "9340:9340"
    environment:
      - PORT=9340
    depends_on:
      - ess-queue-ess
      - ess-enn-ess
    networks:
      - shared-network

networks:
  shared-network:
    driver: bridge
